[{"path":"https://jakepowellcubg.github.io/LStools/articles/Creating-Sankey-Diagrams.html","id":"creating-sankey-diagrams-directly-using-pathways","dir":"Articles","previous_headings":"","what":"Creating sankey diagrams directly using pathways","title":"Creating Sankey Diagrams","text":"can use sankey_filtered() convert pathways data frame sankey diagram. flow_columns specifies columns used pathways sankey diagram order. can specified either column numbers (2 = KS1, 3 = KS2, etc) via columns names flow_columns = c('KS1', 'KS2', 'GCSE', 'A_level'). can use function explore subsections pipeline using filters input. Note union input allows looking flows multiple nodes particular stage. .e set union = T example KS2 level 5+ GCSE grade 9 output sankey diagram (rather student got KS2 level 5+ GCSE grade 9). well zooming particular parts pipeline filter can also used relation demographics well. instead want ‘trace’ students interest within whole system can use sankey_trace() function, instead ‘filters’ enter students want trace split_by input.","code":"p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = '')  p # Only those that have GCSE grade 9. p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = 'GCSE: 9') p # Only those that have GCSE grade 9 and KS2 level 5+. p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = c('GCSE: 9', 'KS2: 5+')) p # Only those that have GCSE grade 9 or grade 8. p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = c('GCSE: 9', 'GCSE: 8'), union = T) p # Only those that have FSM status. p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = 'FSM: Yes') p # Only those that are FSM and got a grade 9 at GCSE. p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = c('GCSE: 9', 'FSM: Yes')) p # Only those that have FSM status. p = sankey_trace(pathways = pathways, flow_columns = c(2:5), split_by = 'FSM: Yes') p # Only those that got a grade 9 at GCSE. p = sankey_trace(pathways = pathways, flow_columns = c(2:5), split_by = c('GCSE: 9' )) p"},{"path":"https://jakepowellcubg.github.io/LStools/articles/Creating-Sankey-Diagrams.html","id":"customisation-visualisation-options","dir":"Articles","previous_headings":"","what":"Customisation visualisation options","title":"Creating Sankey Diagrams","text":"section show use functions alter visualisation sankey diagrams.","code":"p = sankey_filtered(pathways = pathways, flow_columns = c(2:5), filters = c('GCSE: 9', 'GCSE: 8'), union = T)  ## Add header to columns p |> add_column_names(column_titles = c('KS1', 'KS2', 'GCSE', 'A Level'),fontSize = 14) # Update the node names. # p |> get_nodes() # Can be run to get the node order in the diagram to change. p |> update_node_title(titles = c(\"Level 3+\", \"Level 2A\", \"Level 2B\", \"Level 2C-\",                        \"Level 6\", \"Level 5+\", \"Level 5-\", \"Level 4\", \"Level 3-\",                        \"Grade 8\",\"Grade 9\",                        \"Maths + Further\", \"Maths\", \"No Maths\" )) # Change the colour scheme where the links correspond to the node values (doesn't show in Rmarkdown) p |> update_sankey_colour(colors_node =  viridis::magma(length(p |> get_nodes())),                           type = 'source') # Change the colour for only specified links. (doesn't show in Rmarkdown) col = rep('gray', p |> get_links() |> length()) col[c(1,5,10)] = 'orange' col[c(2,25,20)] = 'green'    q = p |> update_sankey_colour(colors_node = viridis::magma(length(p |> get_nodes())),                                 colors_link = col)"},{"path":"https://jakepowellcubg.github.io/LStools/articles/Creating-Sankey-Diagrams.html","id":"saving-exporting-sankey-diagrams","dir":"Articles","previous_headings":"","what":"Saving / exporting sankey diagrams","title":"Creating Sankey Diagrams","text":"can use saveNetwork() NetworkD3 package save widget .html file can use webshot() function webshot2 package save static version plot .png file (taking image saved .html version. save underlying information sankey diagram formatted .xlsx file can use function sankey_export_xlsx(), allows title source added spreadsheet (needed statistical disclosure). method creates spreadsheet columns ‘Source’, ‘Target’ ‘Number Students’ describing flow nodes diagram. saving filtered sankey diagram another column added informing whether flow relates traced non-traced students. can recreate sankey diagrams (return list nodes links required sankey diagrams) exported .xlsx files using sankey_from_extract() ( links_from_extract()).","code":"# Save the interactive sankey diagram networkD3::saveNetwork(network = p,                        file = paste0('sankey_diagram.html'))  # Save a static version of the plot (need to save an interactive version first) webshot2::webshot(url = 'sankey_diagram.html',                   file =  'sankey_diagram.png',                   vwidth = 1000,                   vheight = 700) # Save an .xlsx file containing the sankey information (for SDC check)   p |> LStools::sankey_export_xlsx(title = 'Student flow from KS1 to A-level choices',                               source = 'Source: National Pupil Database',                               filepath = paste0(getwd(), '/sankey_information.xlsx'))        # Save an .xlsx file containing the sankey information traced version     p = sankey_trace(pathways = pathways,                      flow_columns = c(2:5),                      split_by = c('GCSE: 9','GCSE: 8' ),                      union = T)      p |>       LStools::sankey_export_xlsx(title = 'Student flow from KS1 to A-level choices tracing those that achieve grade 8 or 9 at GCSE',                               source = 'Source: National Pupil Database',                               filepath = paste0(getwd(), '/sankey_information2.xlsx'))"},{"path":"https://jakepowellcubg.github.io/LStools/articles/Creating_simple_reports.html","id":"composition-of-a-stage","dir":"Articles","previous_headings":"","what":"Composition of a stage","title":"Creating simple reports","text":"function create_stage_composition_report() can used simply create report given cleaned student information. report concentrates single stage (KS1 maths, GCSE maths, etc) looks composition students stage relative quantities (demographics, grades stages). use function require raw data, row corresponds unique student. generate data columns Free school meal (FSM) status, maths grades KS1, KS2 GCSE whether student -level maths (maths).  Note factored data way grades ordered highest lowest column (applicable), report grades shown order rather alphabetical (Also useful sankey diagrams, see vignette Creating Sankey Diagrams). Suppose want look composition GCSE maths grades relative students achievement mathematcs KS1 KS2, addition FSM status. can create report exploring running create_stage_composition_report() also allows statistical disclosure control via input do_SDC can fine tuned using parameters round_to issue_level control level rounding student counts supress.","code":"set.seed(33) KS1 = sample(c('3+','2A','2B', '2C-'), 10000, replace = T, prob = c(.21,.28,.26,.25)) KS2 = sample(c('6','5+', '5-','4','3-'), 10000, replace = T, prob = c(0.03, 0.15, 0.22, 0.46, 0.13)) GCSE = sample(c('9','8', '7', '6-'), 10000, replace = T, prob = c(0.03, 0.07, 0.10, 0.80)) A_level =  sample(c('Maths + Further',  'Maths', 'No Maths'), 10000, replace = T, prob = c(0.02, 0.09, 0.89)) FSM = sample(c('Yes', 'No'), 10000, replace = T, prob = c(.238, 1-.238))  raw = data.frame(FSM = factor(FSM),                  KS1 = factor(KS1, levels = c('3+','2A','2B', '2C-')),                  KS2 = factor(KS2, levels = c('6','5+', '5-','4','3-')),                  GCSE= factor(GCSE, levels = c('9','8', '7', '6-')),                   A_level = factor(A_level, levels = c('Maths + Further',  'Maths', 'No Maths'))) create_stage_composition_report(raw = raw,                          stage_column = 'GCSE',                          describer_columns = c('KS1', 'KS2','FSM'),                          output_dir = getwd(),                          output_file = 'Composition_of_GCSE_by_KS1_KS2_FSM.html') create_stage_composition_report(raw = raw,                          stage_column = 'GCSE',                          describer_columns = c('KS1', 'KS2','FSM'),                          do_SDC = TRUE,                          round_to = 5,                          issue_level = 5,                          output_dir = getwd()                           output_file = 'Composition_of_GCSE_by_KS1_KS2_FSM_with_SDC.html')"},{"path":"https://jakepowellcubg.github.io/LStools/articles/creating_simple_tables.html","id":"composition-of-columns","dir":"Articles","previous_headings":"","what":"Composition of columns","title":"Creating simple tables","text":"Within LStools pathway_summary_columns() provides useful sanity check look composition column within pathways, check errors potentially created cleaning stage. function creates list data frames column within pathways detailing number percentage students split values column.","code":"composition_columns = pathways |> LStools::pathway_summary_columns() composition_columns #> $FSM #>     FSM No_students % (population) #> 1    No        7653          76.53 #> 2   Yes        2347          23.47 #> 3 Total       10000           100% #>  #> $KS1 #>     KS1 No_students % (population) #> 1    2A        2710           27.1 #> 2    2B        2724          27.24 #> 3   2C-        2475          24.75 #> 4    3+        2091          20.91 #> 5 Total       10000           100% #>  #> $KS2 #>     KS2 No_students % (population) #> 1    3-        1277          12.77 #> 2     4        4650           46.5 #> 3    5-        2290           22.9 #> 4    5+        1494          14.94 #> 5     6         289           2.89 #> 6 Total       10000           100% #>  #> $GCSE #>    GCSE No_students % (population) #> 1    6-        7949          79.49 #> 2     7        1018          10.18 #> 3     8         748           7.48 #> 4     9         285           2.85 #> 5 Total       10000           100% #>  #> $A_level #>           A_level No_students % (population) #> 1           Maths         845           8.45 #> 2 Maths + Further         207           2.07 #> 3        No Maths        8948          89.48 #> 4           Total       10000           100%"},{"path":"https://jakepowellcubg.github.io/LStools/articles/creating_simple_tables.html","id":"composition-tables","dir":"Articles","previous_headings":"","what":"Composition tables","title":"Creating simple tables","text":"common output SRS composition tables stages maths pipeline. example GCSE maths grades split demographics students. Within LStools pathway_composition_tables() can used create composition tables multiple stages across multiple demographic columns within pathways. Prior outputting SRS need apply statistical disclosure control can turned via toggle pathway_composition_tables(). can save composition table excel ready checked output. use data_frame_to_workbook() allow stage composition table unique sheets within xlsx workbook individual title source information.","code":"composition_by_FSM_KS1 = pathways |> pathway_composition_tables(describers = c('FSM','KS1'), stages = c('KS2', 'GCSE')) composition_by_FSM_KS1 #> $KS2 #>   describer level   6   5+   5-    4  3- Total #> 1       FSM    No 222 1161 1740 3565 965  7653 #> 2       FSM   Yes  67  333  550 1085 312  2347 #> 3       KS1    3+  58  317  460  992 264  2091 #> 4       KS1    2A  83  415  608 1242 362  2710 #> 5       KS1    2B  74  409  661 1241 339  2724 #> 6       KS1   2C-  74  353  561 1175 312  2475 #>  #> $GCSE #>   describer level   9   8   7   6- Total #> 1       FSM    No 212 563 764 6114  7653 #> 2       FSM   Yes  73 185 254 1835  2347 #> 3       KS1    3+  59 151 212 1669  2091 #> 4       KS1    2A  85 202 282 2141  2710 #> 5       KS1    2B  71 211 258 2184  2724 #> 6       KS1   2C-  70 184 266 1955  2475 composition_by_FSM_KS1_SDC = pathways |> pathway_composition_tables(describers = c('FSM','KS1'), stages = c('KS2', 'GCSE'),do_SDC = TRUE) # By default SDC is turned off (FALSE). composition_by_FSM_KS1_SDC #> $KS2 #>   describer level   6   5+   5-    4  3- Total #> 1       FSM    No 220 1160 1740 3560 960  7650 #> 2       FSM   Yes  70  330  550 1080 310  2350 #> 3       KS1    3+  60  320  460  990 260  2090 #> 4       KS1    2A  80  420  610 1240 360  2710 #> 5       KS1    2B  70  410  660 1240 340  2720 #> 6       KS1   2C-  70  350  560 1180 310  2480 #>  #> $GCSE #>   describer level   9   8   7   6- Total #> 1       FSM    No 210 560 760 6110  7650 #> 2       FSM   Yes  70 180 250 1840  2350 #> 3       KS1    3+  60 150 210 1670  2090 #> 4       KS1    2A  80 200 280 2140  2710 #> 5       KS1    2B  70 210 260 2180  2720 #> 6       KS1   2C-  70 180 270 1960  2480 data_frame_to_workbook(data = composition_by_FSM_KS1_SDC$KS2,                             sheet = 'KS2',                             title = 'Composition of KS2 maths grade by FSM status and KS1 maths grade',                             source = 'Source: National Pupil Database') |>   data_frame_to_workbook(data = composition_by_FSM_KS1_SDC$GCSE,                               sheet = 'GCSE',                               title = 'Composition of GCSE maths grade by FSM status and KS1 maths grade',                               source = 'Source: National Pupil Database') |>   openxlsx::saveWorkbook(file = 'composition.xlsx', overwrite = TRUE)"},{"path":"https://jakepowellcubg.github.io/LStools/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jake Powell. Maintainer.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Powell J (2024). LStools: Tools exploring longitudinal (education) data (sankey diagrams). R package version 0.1.0, https://jakepowellcubg.github.io/LStools/.","code":"@Manual{,   title = {LStools: Tools for exploring longitudinal (education) data (sankey diagrams)},   author = {Jake Powell},   year = {2024},   note = {R package version 0.1.0},   url = {https://jakepowellcubg.github.io/LStools/}, }"},{"path":"https://jakepowellcubg.github.io/LStools/index.html","id":"id_-lstools","dir":"","previous_headings":"","what":"# LStools","title":"Tools for exploring longitudinal (education) data (sankey diagrams)","text":"📦 LStools package contains tools analysing longitudinal study data, particular tools creating sankey diagrams.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Tools for exploring longitudinal (education) data (sankey diagrams)","text":"can install LStools calling following command: {r} devtools::install_github(\"JakePowellCUBG/LStools\", dependencies = TRUE) #development version","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/LStools-package.html","id":null,"dir":"Reference","previous_headings":"","what":"LStools: Tools for exploring longitudinal (education) data (sankey diagrams) — LStools-package","title":"LStools: Tools for exploring longitudinal (education) data (sankey diagrams) — LStools-package","text":"functions creating sankey diagrams (build upon networkD3 package) longitudinal (education) data together useful functions.","code":""},{"path":[]},{"path":"https://jakepowellcubg.github.io/LStools/reference/SDC_to_links.html","id":null,"dir":"Reference","previous_headings":"","what":"Statistical disclosure to sankey — SDC_to_links","title":"Statistical disclosure to sankey — SDC_to_links","text":"Statistical disclosure sankey","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/SDC_to_links.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Statistical disclosure to sankey — SDC_to_links","text":"","code":"SDC_to_links(links, round_to = 5, issue_level = 5)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/SDC_to_links.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Statistical disclosure to sankey — SDC_to_links","text":"links links sankey diagram round_to number round issue_level number, links fewer students value omitted (set \"issue_level\").","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/SDC_to_links.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Statistical disclosure to sankey — SDC_to_links","text":"vector containing links performing SDC","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/add_column_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Functions to customise the styling of the sankey diagrams — add_column_names","title":"Functions to customise the styling of the sankey diagrams — add_column_names","text":"- `add_column_names()` function can used add names stages (columns) sankey diagram.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/add_column_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Functions to customise the styling of the sankey diagrams — add_column_names","text":"","code":"add_column_names(   p,   column_titles,   fontSize = p$x$options$fontSize,   fontFamily = p$x$options$fontFamily )  add_node_hover_text(p, hovertext)  add_link_hover_text(p, hovertext)  update_node_title(p, titles = NULL)  update_sankey_colour(   p,   colors_node = NULL,   colors_link = NULL,   type = \"target\",   link_alpha = 1 )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/add_column_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Functions to customise the styling of the sankey diagrams — add_column_names","text":"p html widget sankey diagram column_titles column_titles fontSize numeric font size pixels node text labels. fontFamily font family node text labels. hovertext character vector either length nodes links (depending function) overwrite hover information sankey diagram. titles character vector length number stages sankey diagram specifying title stage. colors_node character vector length number nodes sankey (`p |> get_nodes() |> length()`) specifying desired colour nodes. colors_link character vector length number links sankey (`p |> get_links() |> length()`) specifying desired colour links type special colour systems links colour nodes come (`type = \"source\"`) colour nodes go towards (`type = \"target\"`) link_alpha numeric 0 1 specifying transparency apply link colours (closer zero larger transparency)","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/add_column_names.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Functions to customise the styling of the sankey diagrams — add_column_names","text":"- `add_node_hover_text()` can used change hover information nodes. - `add_link_hover_text()` can used changed hover information links. - `update_node_title()` can used change displayed node label sankey diagram - `update_sankey_colour()` can used change node/link colouring sankey diagram (sankey_filtered, sankey diagram created using networkD3 package). can omit link colours provide type link colouring dependent source target nodes (using `type`).","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/apply_SDC.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Statistical disclosure to numbers — apply_SDC","title":"Apply Statistical disclosure to numbers — apply_SDC","text":"Apply Statistical disclosure numbers","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/apply_SDC.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Statistical disclosure to numbers — apply_SDC","text":"","code":"apply_SDC(numbers, round_to = 10, issue_level = 5)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/apply_SDC.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Statistical disclosure to numbers — apply_SDC","text":"numbers numbers apply SDC . round_to number round issue_level number, numbers fewer students value omitted (set \"issue_level\").","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/apply_SDC.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Statistical disclosure to numbers — apply_SDC","text":"vector containing numbers performing SDC","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/create_stage_composition_report.html","id":null,"dir":"Reference","previous_headings":"","what":"create_stage_composition_report() — create_stage_composition_report","title":"create_stage_composition_report() — create_stage_composition_report","text":"Creates markdown report looking composition individual stage.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/create_stage_composition_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"create_stage_composition_report() — create_stage_composition_report","text":"","code":"create_stage_composition_report(   raw,   stage_column,   describer_columns,   do_SDC = FALSE,   round_to = 5,   issue_level = 5,   report_name = NULL,   report_kind = \"interactive\",   reference_docx = NULL,   output_file = NULL,   output_dir = NULL )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/create_stage_composition_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"create_stage_composition_report() — create_stage_composition_report","text":"raw raw data row unique student stage_column column name (index) within raw want explore. describer_columns column names (indices) explore relationship `stage_column`. do_SDC Flag (TRUE/FALSE) whether statistical control applied, level statistic control can varied using `round_to` `issue_level`. round_to numeric, value round number students default `5`. issue_level numeric, count students less `issue_level` redacted. performed prior rounding. report_name text add filename output_file provided. report_kind kind report produce `interactive` (html document) `static` (word document). reference_docx p output_file name file output (extension) output_dir directory produce output file.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/create_stage_composition_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"create_stage_composition_report() — create_stage_composition_report","text":"function creates markdown report produces table values stage (column data) interest. also can breakdown composition stage columns data y using `describer_columns` input. horizontal bar charts created showing number students within unique groups within stage column given `describer_columns`. Moreover, statistical control can toggled via `do_SDC` flag, level statistical disclosure control can fine tuned using `round_to` `issue_level`.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_workbook.html","id":null,"dir":"Reference","previous_headings":"","what":"Write data frame to openxlsx workbook — data_frame_to_workbook","title":"Write data frame to openxlsx workbook — data_frame_to_workbook","text":"Write data frame openxlsx workbook","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_workbook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write data frame to openxlsx workbook — data_frame_to_workbook","text":"","code":"data_frame_to_workbook(   append_to = NULL,   data = NULL,   sheet = \"Data\",   title = \"\",   source = \"\" )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_workbook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write data frame to openxlsx workbook — data_frame_to_workbook","text":"append_to either NULL new workbook workbook append sheet . data data frame sheet Sheet name title title excel sheet source source information data frame.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_workbook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write data frame to openxlsx workbook — data_frame_to_workbook","text":"workbook","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"Write data frame to excel with title and source — data_frame_to_xlsx","title":"Write data frame to excel with title and source — data_frame_to_xlsx","text":"Write data frame excel title source","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_xlsx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write data frame to excel with title and source — data_frame_to_xlsx","text":"","code":"data_frame_to_xlsx(   data,   title = \"\",   source = \"\",   filepath = paste0(getwd(), \"/data_frame_info.xlsx\") )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_xlsx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write data frame to excel with title and source — data_frame_to_xlsx","text":"data data frame title title excel sheet source source information data frame. filepath path save excel file.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/data_frame_to_xlsx.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Write data frame to excel with title and source — data_frame_to_xlsx","text":"","code":"if(FALSE){ mtcars[1:10,] |> data_frame_to_excel(title = 'First 10 rows of mtcars', source = 'Source: R', filepath = 'first_10_rows_mtcars.xlsx') }"},{"path":"https://jakepowellcubg.github.io/LStools/reference/filter_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter the raw data — filter_data","title":"Filter the raw data — filter_data","text":"Filter raw data","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/filter_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter the raw data — filter_data","text":"","code":"filter_data(data, filters, union = T)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/filter_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter the raw data — filter_data","text":"data data filters filters union union","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/get_nodes.html","id":null,"dir":"Reference","previous_headings":"","what":"Sankey Helper functions — get_nodes","title":"Sankey Helper functions — get_nodes","text":"Helper functions may use want change colour/text/hovertext nodes links sankey diagram.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/get_nodes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sankey Helper functions — get_nodes","text":"","code":"get_nodes(p)  get_links(p)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/get_nodes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sankey Helper functions — get_nodes","text":"p sankey diagram","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/get_nodes.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sankey Helper functions — get_nodes","text":"- `get_nodes()` returns ordered named nodes Sankey diagram - `get_links()`returns ordered named links Sankey diagram.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/links_from_extract.html","id":null,"dir":"Reference","previous_headings":"","what":"Get node and links from excel file or extracted data — links_from_extract","title":"Get node and links from excel file or extracted data — links_from_extract","text":"Get node links excel file extracted data","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/links_from_extract.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get node and links from excel file or extracted data — links_from_extract","text":"","code":"links_from_extract(filepath = NULL, extract = NULL, skip = 3)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/links_from_extract.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get node and links from excel file or extracted data — links_from_extract","text":"filepath filepath .xlsx file containing sankey diagram information. Assume first 3 rows removed can altered `skip` input. extract data frame containing sankey information, column  names including Source, Target Number Students. skip Number rows skipped loading excel file.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/links_from_extract.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get node and links from excel file or extracted data — links_from_extract","text":"list containing nodes links","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_composition_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"A function to get the summary of the describers at each stage of the pipeline. — pathway_composition_tables","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_composition_tables","text":"function get summary describers stage pipeline.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_composition_tables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_composition_tables","text":"","code":"pathway_composition_tables(   pathways,   describers,   stages,   do_SDC = FALSE,   round_to = 10,   issue_level = 5 )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_composition_tables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_composition_tables","text":"pathways data frame containing pathways. describers character vector column names pathways want describe stages (FSM, Sex, IDACI, etc) stages character vector column names pathways split columns given describers. (columns KS1, KS2, etc) do_SDC Flag (TRUE/FALSE) whether statistical disclosure performed. round_to number round issue_level number, values fewer students value omitted (set \"-\").","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_remove_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove columns from pathways — pathway_remove_columns","title":"Remove columns from pathways — pathway_remove_columns","text":"function remove columns pathway tibble, merging now identical rows summing No_students.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_remove_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove columns from pathways — pathway_remove_columns","text":"","code":"pathway_remove_columns(   pathways,   rm_columns = NA,   keep_columns = NA,   convert_na = T,   count_column = \"No_students\" )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_remove_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove columns from pathways — pathway_remove_columns","text":"pathways data frame containing pathways. rm_columns columns names pathways removed. keep_columns columns names pathways kept. convert_na Logical (TRUE/FALSE) whether convert NA. count_column Default = 'No_students'. name column containing number students.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_remove_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove columns from pathways — pathway_remove_columns","text":"pathways columns removed merged counts.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_stage_transition_by_describer.html","id":null,"dir":"Reference","previous_headings":"","what":"A function to get the summary of the describers at each stage of the pipeline. — pathway_stage_transition_by_describer","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_stage_transition_by_describer","text":"function get summary describers stage pipeline.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_stage_transition_by_describer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_stage_transition_by_describer","text":"","code":"pathway_stage_transition_by_describer(pathways, describers, stages)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_stage_transition_by_describer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_stage_transition_by_describer","text":"pathways data frame containing pathways. describers character vector column names pathways want describe stages (FSM, Sex, IDACI, etc) stages character vector column names pathways split columns given describers. (columns KS1, KS2, etc), note order stages need chronological order.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_summary_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Composition of pathways by columns — pathway_summary_columns","title":"Composition of pathways by columns — pathway_summary_columns","text":"function get summary column pathways. .e Number students stage/describer split.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_summary_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Composition of pathways by columns — pathway_summary_columns","text":"","code":"pathway_summary_columns(pathways, convert_na = T)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_summary_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Composition of pathways by columns — pathway_summary_columns","text":"pathways data frame containing pathways. convert_na Logical (TRUE/FALSE) whether convert NA.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_summary_describers_at_stages.html","id":null,"dir":"Reference","previous_headings":"","what":"A function to get the summary of the describers at each stage of the pipeline. — pathway_summary_describers_at_stages","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_summary_describers_at_stages","text":"function get summary describers stage pipeline.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_summary_describers_at_stages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_summary_describers_at_stages","text":"","code":"pathway_summary_describers_at_stages(pathways, describers, stages)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_summary_describers_at_stages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function to get the summary of the describers at each stage of the pipeline. — pathway_summary_describers_at_stages","text":"pathways data frame containing pathways. describers character vector column names pathways want describe stages (FSM, Sex, IDACI, etc) stages character vector column names pathways split columns given describers. (columns KS1, KS2, etc)","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_to_links.html","id":null,"dir":"Reference","previous_headings":"","what":"A function that converts pathways to sankey diagram information. — pathway_to_links","title":"A function that converts pathways to sankey diagram information. — pathway_to_links","text":"Note need remove \"describer\" columns prior using function. words column pathways viewed stage (KS1, KS2, etc) sankey diagram. Hence order columns also important.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_to_links.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function that converts pathways to sankey diagram information. — pathway_to_links","text":"","code":"pathway_to_links(pathways, links_as_pos = TRUE, remove_na = T, ...)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_to_links.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function that converts pathways to sankey diagram information. — pathway_to_links","text":"pathways pathways links_as_pos links_as_pos remove_na remove_na Flag (TRUE/FALSE) whether NA values removed. ... arguments `SDC_to_links()`.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/pathway_to_links.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A function that converts pathways to sankey diagram information. — pathway_to_links","text":"links","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/raw_to_pathway.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert raw information (individual students) into pathways — raw_to_pathway","title":"Convert raw information (individual students) into pathways — raw_to_pathway","text":"function convert raw student information flows students pipeline.  E.g. raw row unique student column contains information student grade ethnicity.  function assumes column variable want calculate flows . Therefore, omit columns need using function.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/raw_to_pathway.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert raw information (individual students) into pathways — raw_to_pathway","text":"","code":"raw_to_pathway(raw)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/raw_to_pathway.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert raw information (individual students) into pathways — raw_to_pathway","text":"raw raw data row unique student.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/raw_to_pathway.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert raw information (individual students) into pathways — raw_to_pathway","text":"pathways, number students unique pathway.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/remove.factors.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove factors from a data frame. — remove.factors","title":"Remove factors from a data frame. — remove.factors","text":"Remove factors data frame.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/remove.factors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove factors from a data frame. — remove.factors","text":"","code":"remove.factors(df)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/remove.factors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove factors from a data frame. — remove.factors","text":"df data frame","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/remove.factors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove factors from a data frame. — remove.factors","text":"data frame without factors","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_export_xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"Write sankey to excel — sankey_export_xlsx","title":"Write sankey to excel — sankey_export_xlsx","text":"function writes sankey diagram information (flows) .xlsx file title (title) subtitle (source) ready SDC checks / outputting.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_export_xlsx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write sankey to excel — sankey_export_xlsx","text":"","code":"sankey_export_xlsx(   p,   title = \"Sankey Information\",   source = \"\",   filepath = paste0(getwd(), \"/sankey_info.xlsx\") )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_export_xlsx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write sankey to excel — sankey_export_xlsx","text":"p sankey diagram title title excel spreadsheet source sources used sankey diagram (NPD / HESA, etc) filepath file path save .xlsx file .","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_filtered.html","id":null,"dir":"Reference","previous_headings":"","what":"Create sankey diagram of the filtered data. — sankey_filtered","title":"Create sankey diagram of the filtered data. — sankey_filtered","text":"Create sankey diagram filtered data.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_filtered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create sankey diagram of the filtered data. — sankey_filtered","text":"","code":"sankey_filtered(   pathways,   flow_columns,   filters = \"\",   union = F,   fontFamily = NULL,   fontSize = 7,   do_SDC = FALSE,   ... )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_filtered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create sankey diagram of the filtered data. — sankey_filtered","text":"pathways student pathways number students. flow_columns Column names (index) 'stages' pathways want create sankey diagram . filters character vector describing filters apply data. format `XX: YY` XX stage YY node, 'FSM: Yes'. union Flag (TRUE/FALSE) whether want union filters (across single stages) fontFamily font family node text labels. fontSize numeric font size pixels node text labels. do_SDC Flag (TRUE/FALSE) whether want SDC via `SDC_to_links()` function. ... arguments `SDC_to_links()` `networkD3::sankeyNetwork()`.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_filtered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create sankey diagram of the filtered data. — sankey_filtered","text":"sankey diagram","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_from_extract.html","id":null,"dir":"Reference","previous_headings":"","what":"Create sankey diagram from excel file or extracted data — sankey_from_extract","title":"Create sankey diagram from excel file or extracted data — sankey_from_extract","text":"Create sankey diagram excel file extracted data","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_from_extract.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create sankey diagram from excel file or extracted data — sankey_from_extract","text":"","code":"sankey_from_extract(   filepath = NULL,   extract = NULL,   fontFamily = NULL,   skip = 3,   fontSize = 7 )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_from_extract.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create sankey diagram from excel file or extracted data — sankey_from_extract","text":"filepath filepath .xlsx file containing sankey diagram information. Assume first 3 rows removed can altered `skip` input. extract data frame containing sankey information, column  names including Source, Target Number Students. fontFamily font family node text labels. skip Number rows skipped loading excel file. fontSize numeric font size pixels node text labels.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_from_extract.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create sankey diagram from excel file or extracted data — sankey_from_extract","text":"sankey diagram","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_to_data_frame.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a sankey diagram to a data frame (or list of data frames) — sankey_to_data_frame","title":"Convert a sankey diagram to a data frame (or list of data frames) — sankey_to_data_frame","text":"Convert sankey diagram data frame (list data frames)","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_to_data_frame.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a sankey diagram to a data frame (or list of data frames) — sankey_to_data_frame","text":"","code":"sankey_to_data_frame(p, simple = T)"},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_to_data_frame.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a sankey diagram to a data frame (or list of data frames) — sankey_to_data_frame","text":"p sankey diagram simple Flag (TRUE/FALSE) whether want simplified information (single data frame source target number students) original data (two data frames one links one nodes)","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_trace.html","id":null,"dir":"Reference","previous_headings":"","what":"Create traced sankey diagram — sankey_trace","title":"Create traced sankey diagram — sankey_trace","text":"Create traced sankey diagram","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_trace.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create traced sankey diagram — sankey_trace","text":"","code":"sankey_trace(   pathways,   flow_columns,   split_by,   union = F,   colors = c(\"red\", \"gray\", \"antiquewhite\"),   fontFamily = NULL,   fontSize = 7 )"},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_trace.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create traced sankey diagram — sankey_trace","text":"pathways student pathways number students. flow_columns Column names (index) 'stages' pathways want create sankey diagram . split_by character vector describing filters split data . format `XX: YY` XX stage YY node, 'FSM: Yes'. union Flag (TRUE/FALSE) whether want union filters (across single stages) colors character vector length three `c(colA, colB, colC)` colA link colour traced students, colB link colour students colC node colour. fontFamily font family node text labels. fontSize numeric font size pixels node text labels.","code":""},{"path":"https://jakepowellcubg.github.io/LStools/reference/sankey_trace.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create traced sankey diagram — sankey_trace","text":"traced sankey diagram","code":""}]
