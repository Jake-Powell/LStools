<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating simple reports â€¢ LStools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating simple reports">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LStools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Creating_simple_reports.html">Creating simple reports</a></li>
    <li><a class="dropdown-item" href="../articles/creating_simple_tables.html">Creating simple tables</a></li>
    <li><a class="dropdown-item" href="../articles/Creating-Sankey-Diagrams.html">Creating sankey diagrams</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="Creating_simple_reports_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="Creating_simple_reports_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="Creating_simple_reports_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="Creating_simple_reports_files/datatables-binding-0.33/datatables.js"></script><link href="Creating_simple_reports_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="Creating_simple_reports_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="Creating_simple_reports_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="Creating_simple_reports_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="Creating_simple_reports_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creating simple reports</h1>
            
      

      <div class="d-none name"><code>Creating_simple_reports.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jakepowellcubg.github.io/LStools/">LStools</a></span><span class="op">)</span></span></code></pre></div>
<p><em>In this vignette we show how to use the LStools package to create
simple reports from raw student data</em>.</p>
<div class="section level3">
<h3 id="composition-of-a-stage">Composition of a stage<a class="anchor" aria-label="anchor" href="#composition-of-a-stage"></a>
</h3>
<p>The function <code><a href="../reference/create_stage_composition_report.html">create_stage_composition_report()</a></code> can be
used to simply create a report given some cleaned student information.
Where the report concentrates on a single stage (KS1 maths, GCSE maths,
etc) and looks at the composition of the students at that stage relative
to other quantities (demographics, grades at other stages).</p>
<p>To use the function we require some raw data, where each row
corresponds to a unique student. We generate some data below where we
have columns for Free school meal (FSM) status, maths grades at KS1, KS2
and GCSE and whether the student does a-level maths (or further
maths).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">33</span><span class="op">)</span></span>
<span><span class="va">KS1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3+'</span>,<span class="st">'2A'</span>,<span class="st">'2B'</span>, <span class="st">'2C-'</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">T</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.21</span>,<span class="fl">.28</span>,<span class="fl">.26</span>,<span class="fl">.25</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">KS2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'6'</span>,<span class="st">'5+'</span>, <span class="st">'5-'</span>,<span class="st">'4'</span>,<span class="st">'3-'</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">T</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.03</span>, <span class="fl">0.15</span>, <span class="fl">0.22</span>, <span class="fl">0.46</span>, <span class="fl">0.13</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">GCSE</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'9'</span>,<span class="st">'8'</span>, <span class="st">'7'</span>, <span class="st">'6-'</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">T</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.03</span>, <span class="fl">0.07</span>, <span class="fl">0.10</span>, <span class="fl">0.80</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">A_level</span> <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Maths + Further'</span>,  <span class="st">'Maths'</span>, <span class="st">'No Maths'</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">T</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.02</span>, <span class="fl">0.09</span>, <span class="fl">0.89</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">FSM</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Yes'</span>, <span class="st">'No'</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">T</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.238</span>, <span class="fl">1</span><span class="op">-</span><span class="fl">.238</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">raw</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>FSM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">FSM</span><span class="op">)</span>,</span>
<span>                 KS1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">KS1</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'3+'</span>,<span class="st">'2A'</span>,<span class="st">'2B'</span>, <span class="st">'2C-'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 KS2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">KS2</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'6'</span>,<span class="st">'5+'</span>, <span class="st">'5-'</span>,<span class="st">'4'</span>,<span class="st">'3-'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 GCSE<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">GCSE</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'9'</span>,<span class="st">'8'</span>, <span class="st">'7'</span>, <span class="st">'6-'</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                 A_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">A_level</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Maths + Further'</span>,  <span class="st">'Maths'</span>, <span class="st">'No Maths'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p></p>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:auto;"></div> <script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"filter":"none","vertical":false,"data":[["No","No","No","No","No","No","No","No","No","No"],["2B","2B","2B","3+","3+","2B","2B","2B","2A","2A"],["5-","5-","4","5-","3-","3-","4","4","5+","5+"],["6-","7","6-","6-","6-","6-","6-","6-","6-","6-"],["No Maths","No Maths","No Maths","No Maths","No Maths","No Maths","No Maths","No Maths","No Maths","No Maths"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>FSM<\/th>\n      <th>KS1<\/th>\n      <th>KS2<\/th>\n      <th>GCSE<\/th>\n      <th>A_level<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"dom":"tp","paging":false,"columnDefs":[{"name":"FSM","targets":0},{"name":"KS1","targets":1},{"name":"KS2","targets":2},{"name":"GCSE","targets":3},{"name":"A_level","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>Note that I have factored the data in such a way that the grades are
ordered from highest to lowest for each column (where applicable), this
is such that in the report the grades are shown in that order rather
than alphabetical (Also useful for sankey diagrams, see vignette
<em>Creating Sankey Diagrams</em>).</p>
<p>Suppose we want to look at the composition of GCSE maths grades
relative to students achievement in mathematcs in KS1 and KS2, in
addition to FSM status.</p>
<p>We can create a report exploring this by running</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_stage_composition_report.html">create_stage_composition_report</a></span><span class="op">(</span>raw <span class="op">=</span> <span class="va">raw</span>,</span>
<span>                         stage_column <span class="op">=</span> <span class="st">'GCSE'</span>,</span>
<span>                         describer_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'KS1'</span>, <span class="st">'KS2'</span>,<span class="st">'FSM'</span><span class="op">)</span>,</span>
<span>                         output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                         output_file <span class="op">=</span> <span class="st">'Composition_of_GCSE_by_KS1_KS2_FSM.html'</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/create_stage_composition_report.html">create_stage_composition_report()</a></code> also allows for
statistical disclosure control via the input <code>do_SDC</code> which
can be fine tuned using the parameters <code>round_to</code> and
<code>issue_level</code> to control the level of rounding and student
counts to supress.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">create_stage_composition_report</span>(<span class="at">raw =</span> raw,</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>                         <span class="at">stage_column =</span> <span class="st">'GCSE'</span>,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                         <span class="at">describer_columns =</span> <span class="fu">c</span>(<span class="st">'KS1'</span>, <span class="st">'KS2'</span>,<span class="st">'FSM'</span>),</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>                         <span class="at">do_SDC =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>                         <span class="at">round_to =</span> <span class="dv">5</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>                         <span class="at">issue_level =</span> <span class="dv">5</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>                         <span class="at">output_dir =</span> <span class="fu">getwd</span>() </span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>                         <span class="at">output_file =</span> <span class="st">'Composition_of_GCSE_by_KS1_KS2_FSM_with_SDC.html'</span>)</span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jake Powell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
